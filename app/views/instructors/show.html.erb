<% title("#{@instructor.teacher.first_name} #{@instructor.teacher.last_name}'s page") %>

<div class="row">
	<div class="col-sm-10 col-sm-offset-1">
		<div class="page-header">
			<div class="row">
				<div class="col-sm-3 ">
				
					<%= image_tag @instructor.avatar_url(:thumb), class: 'img-rounded' %>
				</div>
				<h2 class="col-sm-8">
					<%="#{@instructor.teacher.first_name} #{@instructor.teacher.last_name}" %> &nbsp;
				</h2>
			</div>
		</div>
		<p><%= "#{@instructor.teacher.first_name} is in #{@instructor.teacher.time_zone}." %></p>

		<% if @instructor.resume? %>
			<%= link_to @instructor.resume_url, class: 'btn btn-primary btn-xs', target: "_blank" do %>
				<span class="glyphicon glyphicon-download-alt"></span>&nbsp;&nbsp;Download <%= @instructor.teacher.first_name.capitalize %>'s Resume
			<% end %>
		<% else %>	
			<i><%= "#{@instructor.teacher.first_name.capitalize} hasn't uploaded a resume yet." %></i>
		<% end %>
	<br><br>

<%= @instructor.subject_to_teach %>

		<%= link_to 'Availabilities',instructor_availabilities_path(@instructor) %>
		</div>
	</div>
<br>

<div class="row">
	<div class="col-sm-8 col-sm-offset-1">
		<div id='top'>
			Language:
			<select id='lang-selector'></select>
		</div>
	</div>
</div>

<br>

<% if current_user == @instructor.teacher %>
  <!-- This code renders the calendar the Instructor will see-->
  <div class="row">
  	<div class="col-sm-8 col-sm-offset-1">
  		<div id="Icalendar" class="Icalendar" data-instructor-id="<%= @instructor.id %>" data-instructor-timezone="<%= @instructor.teacher.time_zone %>">
  <!-- pass the timezone params. pass the other event params via the 'data' attribute -->
  		</div>
  	</div>
  </div>


<!-- This code renders the calendar the Users will see-->
<% else %>
  <div class="row">
    <div class="col-sm-8 col-sm-offset-1">
      <div id="Ucalendar" class="Ucalendar" data-instructor-id="<%= @instructor.id %>" data-user-timezone="<%= current_user.time_zone if current_user.present? %>">
  <!-- pass the timezone params. pass the other event params via the 'data' attribute -->
      </div>
    </div>
  </div>
<% end %>

<!-- Timeslot modal -->
<div id="availabilityModal" class="modal fade">
 <div class="modal-dialog modal-lg">
   <div class="modal-content">
     <div class="modal-header">
       <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span> <span class="sr-only">close</span></button>
         <h4 id="modalTitle" class="modal-title">Create an Availability</h4>
     </div>

     <div id="modalBody" class="modal-body">

      <%= form_for([@instructor, Availability.new], remote: true) do |f| %>
      
        <div class="field">
          <%= f.label :start_time %>
          <%= f.datetime_select :start_time, discard_year: true, minute_step: 15, ampm: true %>
        </div>

        <div class="field">
          <%= f.label :end_time %>
          <%= f.datetime_select :end_time, discard_year: true, minute_step: 15, ampm: true %>
        </div>

     </div>

      <div class="modal-footer form-group">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="submit" name="commit" id='submit_availability' class="btn btn-md btn-primary">Create this Availability!</button>
      </div>
    <% end %>
    </div>
  </div>
</div>

<!-- Booking modal -->
<div id="bookingModal" class="modal fade">
 <div class="modal-dialog modal-lg">
   <div class="modal-content">
     <div class="modal-header">
       <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span> <span class="sr-only">close</span></button>
         <h4 id="modalTitle" class="modal-title"></h4>
     </div>

     <div id="modalBody" class="modal-body">

      <%= form_for([@instructor, Booking.new], remote: true) do |f| %>
      
        <div class="field">
          <%= f.label :start_time %>
          <%= f.datetime_select :start_time, discard_year: true, minute_step: 15, ampm: true %>
        </div>

        <div class="field">
          <%= f.label :end_time %>
          <%= f.datetime_select :end_time, discard_year: true, minute_step: 15, ampm: true %>
        </div>

     </div>

      <div class="modal-footer form-group">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="submit" name="commit" id='submit_booking' class="btn btn-md btn-primary">Create this Booking!</button>
      </div>
    <% end %>
    </div>
  </div>
</div>
